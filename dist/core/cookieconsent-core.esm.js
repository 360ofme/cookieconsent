/*!
* CookieConsent 3.0.0-rc.16
* https://github.com/orestbida/cookieconsent/tree/v3.0-beta
* Author Orest Bida
* Released under the MIT License
*/
const e='opt-in',t='opt-out',o='data-category';class n{constructor(){this.t={mode:e,revision:0,autoClearCookies:!0,manageScriptTags:!0,hideFromBots:!0,cookie:{name:'cc_cookie',expiresAfterDays:182,domain:'',path:'/',sameSite:'Lax'}},this.o={i:{},l:'',_:{},u:{},p:{},m:[],C:!1,v:null,S:null,h:null,D:'',T:!0,N:!1,k:!0,j:[],F:!1,O:'',I:!1,M:[],A:[],R:[],P:[],B:!1,J:!1,L:!1,U:[],G:[],H:[],q:{},K:{},V:{},W:{},X:{},Y:[]},this.Z={$:{},ee:{}},this.te={},this.oe={ne:'cc:onFirstConsent',se:'cc:onConsent',ce:'cc:onChange'}}}const s=new n,c=(e,t)=>e.indexOf(t),r=(e,t)=>-1!==c(e,t),a=e=>Array.isArray(e),i=e=>'string'==typeof e,l=e=>!!e&&'object'==typeof e&&!a(e),f=e=>'function'==typeof e,d=e=>Object.keys(e),_=e=>Array.from(new Set(e)),u=e=>e.dispatchEvent(new Event('change')),p=e=>{const t=document.createElement(e);return'button'===e&&(t.type=e),t},m=(e,t,o)=>e.setAttribute(t,o),g=(e,t,o)=>{e.removeAttribute(o?'data-'+t:t)},C=(e,t,o)=>e.getAttribute(o?'data-'+t:t),v=e=>{if('object'!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());let t=Array.isArray(e)?[]:{};for(let o in e){let n=e[o];t[o]=v(n)}return t},y=()=>{const e={},{M:t,q:o,K:n}=s.o;for(const s of t)e[s]=h(n[s],d(o[s]));return e},S=()=>{const e=s.t.cookie.expiresAfterDays;return f(e)?e(s.o.O):e},h=(e,t)=>{const o=e||[],n=t||[];return o.filter((e=>!r(n,e))).concat(n.filter((e=>!r(o,e))))},b=e=>{s.o.A=_(e),s.o.O=(()=>{let e='custom';const{A:t,M:o,R:n}=s.o,c=t.length;return c===o.length?e='all':c===n.length&&(e='necessary'),e})()},w=(e,t,o)=>{const{ce:n,se:c,ne:r,re:a,ae:i,ie:l}=s.te,d=s.oe,_={cookie:s.o.p};e===d.ne?f(r)&&r(v(_)):e===d.se?f(c)&&c(v(_)):(_.changedCategories=s.o.j,_.changedServices=s.o.W,f(n)&&n(v(_))),((e,t)=>{dispatchEvent(new CustomEvent(e,{detail:t}))})(e,v(_))},D=e=>{const{K:t,W:n,M:c,q:a,Y:i,p:l,j:d}=s.o;for(const e of c){const o=n[e]||t[e]||[];for(const n of o){const o=a[e][n];if(!o)continue;const{onAccept:s,onReject:c}=o;!o.le&&r(t[e],n)&&f(s)?(o.le=!0,s()):o.le&&!r(t[e],n)&&f(c)&&(o.le=!1,c())}}if(!s.t.manageScriptTags)return;const _=i,u=e||l.categories||[],v=(e,s)=>{if(s>=e.length)return;const c=i[s];if(c.fe)return v(e,s+1);const a=c.de,l=c._e,f=c.ue,_=r(u,l),y=!!f&&r(t[l],f);if(!f&&!c.pe&&_||!f&&c.pe&&!_&&r(d,l)||f&&!c.pe&&y||f&&c.pe&&!y&&r(n[l]||[],f)){c.fe=!0;const t=C(a,'type',!0);g(a,'type',!!t),g(a,o);let n=C(a,'src',!0);n&&g(a,'src',!0);const r=p('script');r.textContent=a.innerHTML;for(const{nodeName:e}of a.attributes)m(r,e,a[e]||C(a,e));t&&(r.type=t),n?r.src=n:n=a.src;const i=!!n&&(!t||['text/javascript','module'].includes(t));if(i&&(r.onload=r.onerror=()=>{v(e,++s)}),a.replaceWith(r),i)return}v(e,++s)};v(_,0)},T=(e,t)=>{if(t instanceof RegExp)return e.filter((e=>t.test(e)));{const o=c(e,t);return o>-1?[e[o]]:[]}},E=e=>{const{hostname:t,protocol:o}=location,{name:n,path:c,domain:a,sameSite:i}=s.t.cookie,l=encodeURIComponent(JSON.stringify(s.o.p)),f=e?(()=>{const e=s.o.h,t=e?new Date-e:0;return 864e5*S()-t})():864e5*S(),d=new Date;d.setTime(d.getTime()+f);let _=n+'='+l+(0!==f?'; expires='+d.toUTCString():'')+'; Path='+c+'; SameSite='+i;r(t,'.')&&(_+='; Domain='+a),'https:'===o&&(_+='; Secure'),document.cookie=_,s.o.p},N=(e,t,o)=>{if(0===e.length)return;const n=o||s.t.cookie.domain,c=t||s.t.cookie.path,r='www.'===n.slice(0,4),a=r&&n.substring(4),i=(e,t)=>{document.cookie=e+'=; path='+c+(t?'; domain=.'+t:'')+'; expires=Thu, 01 Jan 1970 00:00:01 GMT;'};for(const t of e)i(t),i(t,n),r&&i(t,a)},k=e=>(e=>{let t;try{t=JSON.parse(decodeURIComponent(e))}catch(e){t={}}return t})(x(e||s.t.cookie.name,!0)),x=(e,t)=>{const o=document.cookie.match('(^|;)\\s*'+e+'\\s*=\\s*([^;]+)');return o?t?o.pop():e:''},j=e=>{const t=document.cookie.split(/;\s*/),o=[];for(const n of t){let t=n.split('=')[0];if(e)try{e.test(t)&&o.push(t)}catch(e){}else o.push(t)}return o},F=(o,n=[])=>{((e,t)=>{const{M:o,A:n,R:c,me:l,V:f,q:_}=s.o;let u=[];if(e){a(e)?u.push(...e):i(e)&&(u='all'===e?o:[e]);for(const e of o)f[e]=r(u,e)?d(_[e]):[]}else u=l?(()=>{const e=s.Z.$;if(!e)return[];let t=[];for(let o in e)e[o].checked&&t.push(o);return t})():n;u=u.filter((e=>!r(o,e)||!r(t,e))),u.push(...c),b(u)})(o,n),(e=>{const t=s.o,{V:o,R:n,K:c,q:a,M:i}=t,l=i;t.X=v(c);for(const e of l){const t=a[e],s=d(t),i=o[e]&&o[e].length>0,l=r(n,e);if(0!==s.length){if(c[e]=[],l)c[e].push(...s);else if(i){const t=o[e];c[e].push(...t)}else c[e]=[];c[e]=_(c[e])}}})(),(()=>{const o=s.o;o.j=s.t.mode===t&&o.T?h(o.P,o.A):h(o.A,o.p.categories);let n=o.j.length>0,c=!1;for(const e of o.M)o.W[e]=h(o.K[e],o.X[e]),o.W[e].length>0&&(c=!0);const a=s.Z.$;for(const e in a)a[e].checked=r(o.A,e);for(const e of o.M){const t=s.Z.ee[e],n=o.K[e];for(const e in t)t[e].checked=r(n,e)}o.S||(o.S=new Date),o.D||(o.D=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))),o.p={categories:v(o.A),revision:s.t.revision,data:o.v,consentTimestamp:o.S.toISOString(),consentId:o.D,services:v(o.K)};let i=!1;const l=n||c;(o.T||l)&&(o.T&&(o.T=!1,i=!0),o.h=o.h?new Date:o.S,o.p.lastConsentTimestamp=o.h.toISOString(),E(),s.t.autoClearCookies&&(i||l)&&(e=>{const t=s.o,o=j(),n=(e=>{const t=s.o;return(e?t.M:t.j).filter((e=>{const o=t.I[e];return!!o&&!o.readOnly&&!!o.autoClear}))})(e);for(const e in t.W)for(const n of t.W[e]){const s=t.q[e][n].cookies;if(!r(t.K[e],n)&&s)for(const e of s){const t=T(o,e.name);N(t,e.path,e.domain)}}for(const s of n){const n=t.I[s].autoClear,c=n&&n.cookies||[],a=r(t.j,s),i=!r(t.A,s),l=a&&i;if(e?i:l){n.reloadPage&&l&&(t.F=!0);for(const e of c){const t=T(o,e.name);N(t,e.path,e.domain)}}}})(i),D()),i&&(w(s.oe.ne),w(s.oe.se),s.t.mode===e)||(l&&w(s.oe.ce),o.F&&(o.F=!1,location.reload()))})()},O=e=>{const t=s.o.T?[]:s.o.A;return r(t,e)},I=(e,t)=>{const{M:o,q:n}=s.o;if(!(e&&t&&i(t)&&r(o,t)&&0!==d(n[t]).length))return!1;((e,t)=>{const o=s.o,{q:n,V:c,me:l}=o,f=s.Z.ee[t]||{},p=s.Z.$[t]||{},m=d(n[t]);if(c[t]=[],i(e)){if('all'===e){if(c[t].push(...m),l)for(let e in f)f[e].checked=!0,u(f[e])}else if(r(m,e)&&c[t].push(e),l)for(let t in f)f[t].checked=e===t,u(f[t])}else if(a(e))for(let o of m){const n=r(e,o);n&&c[t].push(o),l&&(f[o].checked=n,u(f[o]))}const g=0===c[t].length;o.A=g?o.A.filter((e=>e!==t)):_([...o.A,t]),l&&(p.checked=!g,u(p))})(e,t),F()},M=(e,t)=>{const o=s.o.T?[]:s.o.K[t];return r(o,e)},A=e=>''!==x(e,!0),R=(e,t,o)=>{let n=[];const s=e=>{if(i(e)){let t=x(e);''!==t&&n.push(t)}else n.push(...j(e))};if(a(e))for(let t of e)s(t);else s(e);N(n,t,o)},P=()=>{const{O:e,K:t}=s.o,{accepted:o,rejected:n}=(()=>{const{T:e,A:t,M:o}=s.o;return{accepted:t,rejected:e?[]:o.filter((e=>!r(t,e)))}})();return v({acceptType:e,acceptedCategories:o,rejectedCategories:n,acceptedServices:t,rejectedServices:y()})},B=(e,t)=>{let o=document.querySelector('script[src="'+e+'"]');return new Promise((n=>{if(o)return n(!0);if(o=p('script'),l(t))for(const e in t)m(o,e,t[e]);var s,c;o.onload=()=>n(!0),o.onerror=()=>{o.remove(),n(!1)},o.src=e,s=document.head,c=o,s.appendChild(c)}))},J=e=>{let t,o=e.value,n=e.mode,c=!1;const r=s.o;if('update'===n){r.v=t=L('data');const e=typeof t==typeof o;if(e&&'object'==typeof t){!t&&(t={});for(let e in o)t[e]!==o[e]&&(t[e]=o[e],c=!0)}else!e&&t||t===o||(t=o,c=!0)}else t=o,c=!0;return c&&(r.v=t,r.p.data=t,E(!0)),c},L=(e,t)=>{const o=k(t);return e?o[e]:o},U=e=>{const t=s.t,o=s.o.i;return e?t[e]||o[e]:{...t,...o,cookie:{...t.cookie}}},G=()=>!s.o.T,H=async e=>{const{o:n,t:c,oe:f}=s,_=window;if(!_._ccRun){if(_._ccRun=!0,(e=>{const{Z:n,t:c,o:a}=s,i=c,f=a,{cookie:_}=i,u=s.te,p=e.cookie,m=e.categories,g=d(m)||[],v=navigator,y=document;n.ge=y,n.Ce=y.documentElement,_.domain=location.hostname,f.i=e,f.I=m,f.M=g,u.ne=e.onFirstConsent,u.se=e.onConsent,u.ce=e.onChange;const{mode:S,autoClearCookies:h,revision:b,manageScriptTags:w,hideFromBots:D}=e;S===t&&(i.mode=S),'boolean'==typeof h&&(i.autoClearCookies=h),'boolean'==typeof w&&(i.manageScriptTags=w),'number'==typeof b&&b>=0&&(i.revision=b,f.N=!0),!1===D&&(i.hideFromBots=!1),!0===i.hideFromBots&&v&&(f.B=v.userAgent&&/bot|crawl|spider|slurp|teoma/i.test(v.userAgent)||v.webdriver),l(p)&&(i.cookie={..._,...p}),i.autoClearCookies,f.N,i.manageScriptTags,(e=>{const{I:t,q:o,K:n,V:c,R:r}=s.o;for(let a of e){const e=t[a],i=e.services||{},f=l(i)&&d(i)||[];o[a]={},n[a]=[],c[a]=[],e.readOnly&&(r.push(a),n[a]=f),s.Z.ee[a]={};for(let e of f){const t=i[e];t.le=!1,o[a][e]=t}}})(g),(()=>{if(!s.t.manageScriptTags)return;const e=s.o,t=(n=document,c='script['+o+']',n.querySelectorAll(c));var n,c;for(const n of t){let t=C(n,o),s=n.dataset.service||'',c=!1;if(t&&'!'===t.charAt(0)&&(t=t.slice(1),c=!0),'!'===s.charAt(0)&&(s=s.slice(1),c=!0),r(e.M,t)&&(e.Y.push({de:n,fe:!1,pe:c,_e:t,ue:s}),s)){const o=e.q[t];o[s]||(o[s]={le:!1})}}})()})(e),n.B)return;if((()=>{const e=s.o,o=s.t,n=k(),{categories:c,services:r,consentId:l,consentTimestamp:f,lastConsentTimestamp:d,data:_,revision:u}=n,p=a(c);e.p=n,e.D=l;const m=!!l&&i(l);e.S=f,e.S&&(e.S=new Date(f)),e.h=d,e.h&&(e.h=new Date(d)),e.v=void 0!==_?_:null,e.N&&m&&u!==o.revision&&(e.k=!1),e.T=!(m&&e.k&&e.S&&e.h&&p),e.T,(()=>{const e=s.o;for(const o of e.M){const n=e.I[o];if(n.readOnly||n.enabled&&e.i.mode===t){e.P.push(o);const t=e.q[o]||{};for(let n in t)e.K[o].push(n)}}})(),e.T?o.mode===t&&(e.A=[...e.P]):(e.K={...e.K,...r},b([...e.R,...c])),e.V={...e.K}})(),G())return D(),w(f.se);c.mode===t&&D(n.P)}},q=e=>{const{name:t,path:o,domain:c}=s.t.cookie;e&&R(t,o,c);for(const{ve:e,ye:t,Se:o}of s.o.m)e.removeEventListener(t,o);const r=new n;for(const e in s)s[e]=r[e];window._ccRun=!1};export{F as acceptCategory,I as acceptService,O as acceptedCategory,M as acceptedService,R as eraseCookies,U as getConfig,L as getCookie,P as getUserPreferences,B as loadScript,q as reset,H as run,J as setCookieData,G as validConsent,A as validCookie};
